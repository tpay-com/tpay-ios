{"variants":[{"paths":["\/documentation\/tpay\/payment"],"traits":[{"interfaceLanguage":"swift"}]},{"paths":["\/documentation\/tpay\/payment"],"traits":[{"interfaceLanguage":"occ"}]}],"schemaVersion":{"patch":0,"minor":3,"major":0},"seeAlsoSections":[{"identifiers":["doc:\/\/com.tpay.sdk\/documentation\/Tpay\/CardTokenization","doc:\/\/com.tpay.sdk\/documentation\/Tpay\/AutomaticPayments"],"anchor":"Use-cases","title":"Use cases","generated":true}],"abstract":[{"text":"Creating and processing payment transactions.","type":"text"}],"identifier":{"url":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment","interfaceLanguage":"swift"},"primaryContentSections":[{"content":[{"level":2,"anchor":"Create-a-transaction","text":"Create a transaction","type":"heading"},{"inlineContent":[{"type":"text","text":"You can create a transaction using the "},{"type":"reference","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/SingleTransaction","isActive":true},{"type":"text","text":" struct specifying the transactionâ€™s amount and description."}],"type":"paragraph"},{"syntax":"swift","code":["let singleTransaction = SingleTransaction(amount: 50.0, description: \"Product Purchase\")"],"type":"codeListing"},{"level":3,"anchor":"Payer-context","text":"Payer context","type":"heading"},{"inlineContent":[{"type":"text","text":"The payer context provides information about the payer, including their personal details and automatic payment methods. You can pass it along with transaction details."}],"type":"paragraph"},{"syntax":"swift","code":["let payer = Payer(name: \"John Doe\", email: \"john@example.com\")","let payerContext = PayerContext(payer: payer, automaticPaymentMethods: nil)","let singleTransaction = SingleTransaction(amount: 50.0, description: \"Product Purchase\", payerContext: payerContext)"],"type":"codeListing"},{"style":"note","content":[{"inlineContent":[{"type":"text","text":"See "},{"type":"reference","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/AutomaticPaymentMethods","isActive":true},{"type":"text","text":" page describing how to provide automatic payment methods for a specific payer."}],"type":"paragraph"}],"name":"Note","type":"aside"},{"level":3,"anchor":"Recursive-transaction","text":"Recursive transaction","type":"heading"},{"inlineContent":[{"type":"text","text":"For recurring transactions, you shall create an instance of "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/RecursiveTransaction"},{"type":"text","text":" specifying recursion parameters such as the frequency, quantity, and expiry date."}],"type":"paragraph"},{"syntax":"swift","code":["let recursiveTransaction = RecursiveTransaction(wrapping: singleTransaction,","                                                frequency: .monthly,","                                                quantity: .specific(5),","                                                expiryDate: futureDate)"],"type":"codeListing"},{"level":2,"anchor":"Payment-sheet","text":"Payment sheet","type":"heading"},{"inlineContent":[{"text":"The ","type":"text"},{"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Sheet","isActive":true,"type":"reference"},{"text":" is designed to guide the user through the payment process. Payment sheet is presented in a modal style, providing a focused and intuitive payment interaction. The class interacts with the provided ","type":"text"},{"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/PaymentDelegate","isActive":true,"type":"reference"},{"text":" to notify about payment events.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"To create an instance of the ","type":"text"},{"code":"Sheet","type":"codeVoice"},{"text":" class, initialize it with a ","type":"text"},{"code":"Transaction","type":"codeVoice"},{"text":" object and an optional ","type":"text"},{"code":"PaymentDelegate","type":"codeVoice"},{"text":":","type":"text"}],"type":"paragraph"},{"syntax":"swift","code":["let paymentSheet = Payment.Sheet(transaction: transaction, delegate: delegate)"],"type":"codeListing"},{"inlineContent":[{"type":"text","text":"Use the "},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Sheet\/present(from:)"},{"type":"text","text":" method to present the payment sheet from a view controller:"}],"type":"paragraph"},{"syntax":"swift","code":["do {","    try paymentSheet.present(from: presentingViewController)","} catch {","    \/\/ Handle configuration errors or other exceptions","}"],"type":"codeListing"},{"inlineContent":[{"text":"To dismiss the payment sheet manually, call the ","type":"text"},{"code":"dismiss()","type":"codeVoice"},{"text":" method:","type":"text"}],"type":"paragraph"},{"syntax":"swift","code":["paymentSheet.dismiss()"],"type":"codeListing"},{"level":3,"anchor":"SwiftUI-way","text":"SwiftUI way","type":"heading"},{"syntax":"swift","code":["struct ContentView: View {","    @State private var isPaymentSheetPresented = false","","    var body: some View {","        Button(\"Pay\") {","            isPaymentSheetPresented.toggle()","        }","        .presentPaymentSheet(for: transaction, isPresented: $isPaymentSheetPresented) { transactionId in","            \/\/ Handle payment completed","        } onPaymentCancelled: { transactionId in","            \/\/ Handle payment cancelled","        } onErrorOccured: { error in","            \/\/ Handle payment error","        }","    }","}"],"type":"codeListing"},{"level":2,"anchor":"Payment-WebView","text":"Payment WebView","type":"heading"},{"inlineContent":[{"text":"You can easily handle externally generated transactions with a WebView component.","type":"text"},{"text":" ","type":"text"},{"text":"In order to generate a tranaction, please follow ","type":"text"},{"code":"Transactions","type":"codeVoice"},{"text":" section under ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/openapi.tpay.com"},{"text":".","type":"text"}],"type":"paragraph"},{"syntax":"swift","code":["let transaction = ExternallyGeneratedTransaction(transactionPaymentUrl: transactionPaymentUrl,  \/\/ retrieved from POST \/transactions","                                                 onSuccessRedirectUrl: onSuccessUrl,            \/\/ must match the one sent on transaction create","                                                 onErrorRedirectUrl: onErrorUrl)                \/\/ must match the one sent on transaction create","","let paymentWebView = Payment.WebView(transaction: transaction, delegate: delegate)","do {","    try paymentWebView?.present(from: self)","} catch {","    \/\/ Handle configuration errors or other exceptions","}"],"type":"codeListing"},{"level":3,"anchor":"Classes","text":"Classes","type":"heading"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Sheet"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"isActive":true,"type":"reference","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Button"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"isActive":true,"type":"reference","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/WebView"}]}]}],"type":"unorderedList"},{"level":3,"anchor":"Protocols","text":"Protocols","type":"heading"},{"items":[{"content":[{"inlineContent":[{"type":"reference","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/PaymentDelegate","isActive":true}],"type":"paragraph"}]}],"type":"unorderedList"}],"kind":"content"}],"metadata":{"modules":[{"name":"Tpay"}],"roleHeading":"Article","title":"Payment","role":"article"},"hierarchy":{"paths":[["doc:\/\/com.tpay.sdk\/documentation\/Tpay"]]},"sections":[],"kind":"article","references":{"doc://com.tpay.sdk/documentation/Tpay/Payment/Sheet/present(from:)":{"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Sheet\/present(from:)","url":"\/documentation\/tpay\/payment\/sheet\/present(from:)","role":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"present","kind":"identifier"},{"text":"(","kind":"text"},{"text":"from","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"UIViewController","preciseIdentifier":"c:objc(cs)UIViewController","kind":"typeIdentifier"},{"text":") ","kind":"text"},{"text":"throws","kind":"keyword"}],"abstract":[{"text":"Presents the payment sheet from a specified view controller.","type":"text"}],"type":"topic","kind":"symbol","title":"present(from:)"},"doc://com.tpay.sdk/documentation/Tpay":{"role":"collection","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay","type":"topic","url":"\/documentation\/tpay","abstract":[],"title":"Tpay","kind":"symbol"},"doc://com.tpay.sdk/documentation/Tpay/RecursiveTransaction":{"navigatorTitle":[{"kind":"identifier","text":"RecursiveTransaction"}],"title":"RecursiveTransaction","abstract":[{"text":"The ","type":"text"},{"type":"codeVoice","code":"RecursiveTransaction"},{"text":" struct represents a recursive transaction. It extends a specified transaction object with recursion parameters such as the frequency, quantity, and expiry date.","type":"text"}],"fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"RecursiveTransaction"}],"role":"symbol","kind":"symbol","url":"\/documentation\/tpay\/recursivetransaction","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/RecursiveTransaction","type":"topic"},"doc://com.tpay.sdk/documentation/Tpay/Payment/WebView":{"kind":"symbol","url":"\/documentation\/tpay\/payment\/webview","abstract":[{"type":"text","text":"The "},{"type":"codeVoice","code":"WebView"},{"type":"text","text":" class provides functionality for presenting a web view for externally-generated transaction processing within the payment module."}],"navigatorTitle":[{"kind":"identifier","text":"WebView"}],"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/WebView","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"WebView"}],"role":"symbol","title":"Payment.WebView","type":"topic"},"doc://com.tpay.sdk/documentation/Tpay/Payment/Button":{"type":"topic","kind":"symbol","abstract":[{"type":"text","text":"The specialized UIButton designed to serve as an effortless entry point for invoking the payment sheet within your app."}],"url":"\/documentation\/tpay\/payment\/button","navigatorTitle":[{"text":"Button","kind":"identifier"}],"title":"Payment.Button","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Button","kind":"identifier"}],"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Button","role":"symbol"},"doc://com.tpay.sdk/documentation/Tpay/Payment/Sheet":{"navigatorTitle":[{"kind":"identifier","text":"Sheet"}],"type":"topic","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Sheet","kind":"symbol","role":"symbol","url":"\/documentation\/tpay\/payment\/sheet","title":"Payment.Sheet","abstract":[{"text":"The ","type":"text"},{"code":"Payment.Sheet","type":"codeVoice"},{"text":" class provides a streamlined way to present payment transactions within your app.","type":"text"}],"fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"Sheet"}]},"doc://com.tpay.sdk/documentation/Tpay/PaymentDelegate":{"abstract":[{"type":"text","text":"The "},{"code":"PaymentDelegate","type":"codeVoice"},{"type":"text","text":" protocol defines the methods that a delegate should implement to handle payment-related events."}],"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/PaymentDelegate","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"PaymentDelegate","kind":"identifier"}],"navigatorTitle":[{"text":"PaymentDelegate","kind":"identifier"}],"url":"\/documentation\/tpay\/paymentdelegate","type":"topic","title":"PaymentDelegate","kind":"symbol","role":"symbol"},"doc://com.tpay.sdk/documentation/Tpay/AutomaticPaymentMethods":{"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/AutomaticPaymentMethods","role":"symbol","url":"\/documentation\/tpay\/automaticpaymentmethods","navigatorTitle":[{"text":"AutomaticPaymentMethods","kind":"identifier"}],"title":"AutomaticPaymentMethods","type":"topic","abstract":[{"text":"The ","type":"text"},{"code":"AutomaticPaymentMethods","type":"codeVoice"},{"text":" struct represents a collection of automatic payment methods associated with a concrete payer.","type":"text"}],"kind":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"AutomaticPaymentMethods","kind":"identifier"}]},"doc://com.tpay.sdk/documentation/Tpay/SingleTransaction":{"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/SingleTransaction","navigatorTitle":[{"text":"SingleTransaction","kind":"identifier"}],"role":"symbol","kind":"symbol","type":"topic","title":"SingleTransaction","url":"\/documentation\/tpay\/singletransaction","abstract":[{"type":"text","text":"The "},{"type":"codeVoice","code":"SingleTransaction"},{"type":"text","text":" struct represents a single transaction with associated properties such as the transaction amount, description, and payer context."}],"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"SingleTransaction","kind":"identifier"}]},"doc://com.tpay.sdk/documentation/Tpay/AutomaticPayments":{"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/AutomaticPayments","type":"topic","abstract":[{"text":"Providing automatic payment methods for a specific payer.","type":"text"}],"kind":"article","title":"Automatic payments","url":"\/documentation\/tpay\/automaticpayments","role":"article"},"doc://com.tpay.sdk/documentation/Tpay/CardTokenization":{"url":"\/documentation\/tpay\/cardtokenization","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/CardTokenization","type":"topic","title":"Card tokenization","kind":"article","role":"collectionGroup","abstract":[{"type":"text","text":"Saving credit card details for future purchases."}]},"https://openapi.tpay.com":{"url":"https:\/\/openapi.tpay.com","identifier":"https:\/\/openapi.tpay.com","title":"OpenAPI documentation","titleInlineContent":[{"type":"text","text":"OpenAPI documentation"}],"type":"link"}},"variantOverrides":[{"patch":[{"op":"replace","path":"\/identifier\/interfaceLanguage","value":"occ"},{"op":"add","path":"\/topicSections","value":null},{"op":"replace","path":"\/seeAlsoSections","value":[{"anchor":"Use-cases","title":"Use cases","generated":true,"identifiers":["doc:\/\/com.tpay.sdk\/documentation\/Tpay\/CardTokenization","doc:\/\/com.tpay.sdk\/documentation\/Tpay\/AutomaticPayments"]}]}],"traits":[{"interfaceLanguage":"occ"}]}]}