{"hierarchy":{"paths":[["doc:\/\/com.tpay.sdk\/documentation\/Tpay"]]},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment"},"abstract":[{"type":"text","text":"Creating and processing payment transactions."}],"kind":"article","primaryContentSections":[{"content":[{"text":"Create a transaction","level":2,"type":"heading","anchor":"Create-a-transaction"},{"inlineContent":[{"type":"text","text":"You can create a transaction using the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/SingleTransaction"},{"type":"text","text":" struct specifying the transactionâ€™s amount and description."}],"type":"paragraph"},{"code":["let singleTransaction = SingleTransaction(amount: 50.0, description: \"Product Purchase\")"],"type":"codeListing","syntax":"swift"},{"text":"Payer context","level":3,"type":"heading","anchor":"Payer-context"},{"inlineContent":[{"text":"The payer context provides information about the payer, including their personal details and automatic payment methods. You can pass it along with transaction details.","type":"text"}],"type":"paragraph"},{"code":["let payer = Payer(name: \"John Doe\", email: \"john@example.com\")","let payerContext = PayerContext(payer: payer, automaticPaymentMethods: nil)","let singleTransaction = SingleTransaction(amount: 50.0, description: \"Product Purchase\", payerContext: payerContext)"],"type":"codeListing","syntax":"swift"},{"style":"note","content":[{"inlineContent":[{"type":"text","text":"See "},{"isActive":true,"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/AutomaticPaymentMethods","type":"reference"},{"type":"text","text":" page describing how to provide automatic payment methods for a specific payer."}],"type":"paragraph"}],"name":"Note","type":"aside"},{"text":"Recursive transaction","level":3,"type":"heading","anchor":"Recursive-transaction"},{"inlineContent":[{"type":"text","text":"For recurring transactions, you shall create an instance of "},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/RecursiveTransaction"},{"type":"text","text":" specifying recursion parameters such as the frequency, quantity, and expiry date."}],"type":"paragraph"},{"code":["let recursiveTransaction = RecursiveTransaction(wrapping: singleTransaction,","                                                frequency: .monthly,","                                                quantity: .specific(5),","                                                expiryDate: futureDate)"],"type":"codeListing","syntax":"swift"},{"text":"Payment sheet","level":2,"type":"heading","anchor":"Payment-sheet"},{"inlineContent":[{"type":"text","text":"The "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Sheet"},{"type":"text","text":" is designed to guide the user through the payment process. Payment sheet is presented in a modal style, providing a focused and intuitive payment interaction. The class interacts with the provided "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/PaymentDelegate"},{"type":"text","text":" to notify about payment events."}],"type":"paragraph"},{"inlineContent":[{"text":"To create an instance of the ","type":"text"},{"type":"codeVoice","code":"Sheet"},{"text":" class, initialize it with a ","type":"text"},{"type":"codeVoice","code":"Transaction"},{"text":" object and an optional ","type":"text"},{"type":"codeVoice","code":"PaymentDelegate"},{"text":":","type":"text"}],"type":"paragraph"},{"syntax":"swift","code":["let paymentSheet = Payment.Sheet(transaction: transaction, delegate: delegate)"],"type":"codeListing"},{"inlineContent":[{"type":"text","text":"Use the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Sheet\/present(from:)"},{"type":"text","text":" method to present the payment sheet from a view controller:"}],"type":"paragraph"},{"syntax":"swift","code":["do {","    try paymentSheet.present(from: presentingViewController)","} catch {","    \/\/ Handle configuration errors or other exceptions","}"],"type":"codeListing"},{"inlineContent":[{"type":"text","text":"To dismiss the payment sheet manually, call the "},{"type":"codeVoice","code":"dismiss()"},{"type":"text","text":" method:"}],"type":"paragraph"},{"syntax":"swift","code":["paymentSheet.dismiss()"],"type":"codeListing"},{"level":3,"anchor":"SwiftUI-way","text":"SwiftUI way","type":"heading"},{"syntax":"swift","code":["struct ContentView: View {","    @State private var isPaymentSheetPresented = false","","    var body: some View {","        Button(\"Pay\") {","            isPaymentSheetPresented.toggle()","        }","        .presentPaymentSheet(for: transaction, isPresented: $isPaymentSheetPresented) { transactionId in","            \/\/ Handle payment completed","        } onPaymentCancelled: { transactionId in","            \/\/ Handle payment cancelled","        } onErrorOccured: { error in","            \/\/ Handle payment error","        }","    }","}"],"type":"codeListing"},{"level":2,"anchor":"Payment-WebView","text":"Payment WebView","type":"heading"},{"inlineContent":[{"text":"You can easily handle externally generated transactions with a WebView component.","type":"text"},{"text":" ","type":"text"},{"text":"In order to generate a tranaction, please follow ","type":"text"},{"code":"Transactions","type":"codeVoice"},{"text":" section under ","type":"text"},{"identifier":"https:\/\/openapi.tpay.com","isActive":true,"type":"reference"},{"text":".","type":"text"}],"type":"paragraph"},{"code":["let transaction = ExternallyGeneratedTransaction(transactionPaymentUrl: transactionPaymentUrl,  \/\/ retrieved from POST \/transactions","                                                 onSuccessRedirectUrl: onSuccessUrl,            \/\/ must match the one sent on transaction create","                                                 onErrorRedirectUrl: onErrorUrl)                \/\/ must match the one sent on transaction create","","let paymentWebView = Payment.WebView(transaction: transaction, delegate: delegate)","do {","    try paymentWebView?.present(from: self)","} catch {","    \/\/ Handle configuration errors or other exceptions","}"],"syntax":"swift","type":"codeListing"},{"level":3,"text":"Classes","type":"heading","anchor":"Classes"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Sheet","type":"reference","isActive":true}]}]},{"content":[{"inlineContent":[{"type":"reference","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Button","isActive":true}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"reference","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/WebView","isActive":true}],"type":"paragraph"}]}],"type":"unorderedList"},{"level":3,"text":"Protocols","type":"heading","anchor":"Protocols"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/PaymentDelegate","isActive":true,"type":"reference"}]}]}],"type":"unorderedList"}],"kind":"content"}],"schemaVersion":{"minor":3,"patch":0,"major":0},"seeAlsoSections":[{"title":"Use cases","generated":true,"anchor":"Use-cases","identifiers":["doc:\/\/com.tpay.sdk\/documentation\/Tpay\/CardTokenization","doc:\/\/com.tpay.sdk\/documentation\/Tpay\/AutomaticPayments"]}],"variants":[{"paths":["\/documentation\/tpay\/payment"],"traits":[{"interfaceLanguage":"swift"}]},{"paths":["\/documentation\/tpay\/payment"],"traits":[{"interfaceLanguage":"occ"}]}],"metadata":{"role":"article","title":"Payment","roleHeading":"Article","modules":[{"name":"Tpay"}]},"sections":[],"references":{"doc://com.tpay.sdk/documentation/Tpay/SingleTransaction":{"role":"symbol","title":"SingleTransaction","kind":"symbol","type":"topic","abstract":[{"text":"The ","type":"text"},{"code":"SingleTransaction","type":"codeVoice"},{"text":" struct represents a single transaction with associated properties such as the transaction amount, description, and payer context.","type":"text"}],"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/SingleTransaction","url":"\/documentation\/tpay\/singletransaction","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"SingleTransaction","kind":"identifier"}],"navigatorTitle":[{"text":"SingleTransaction","kind":"identifier"}]},"doc://com.tpay.sdk/documentation/Tpay/Payment/Button":{"fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Button","kind":"identifier"}],"url":"\/documentation\/tpay\/payment\/button","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Button","abstract":[{"type":"text","text":"The specialized UIButton designed to serve as an effortless entry point for invoking the payment sheet within your app."}],"navigatorTitle":[{"text":"Button","kind":"identifier"}],"type":"topic","role":"symbol","kind":"symbol","title":"Payment.Button"},"doc://com.tpay.sdk/documentation/Tpay/Payment/Sheet":{"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Sheet","title":"Payment.Sheet","url":"\/documentation\/tpay\/payment\/sheet","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"Sheet"}],"type":"topic","navigatorTitle":[{"kind":"identifier","text":"Sheet"}],"role":"symbol","abstract":[{"text":"The ","type":"text"},{"code":"Payment.Sheet","type":"codeVoice"},{"text":" class provides a streamlined way to present payment transactions within your app.","type":"text"}],"kind":"symbol"},"doc://com.tpay.sdk/documentation/Tpay/Payment/WebView":{"abstract":[{"type":"text","text":"The "},{"type":"codeVoice","code":"WebView"},{"type":"text","text":" class provides functionality for presenting a web view for externally-generated transaction processing within the payment module."}],"url":"\/documentation\/tpay\/payment\/webview","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/WebView","kind":"symbol","role":"symbol","type":"topic","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"WebView","kind":"identifier"}],"navigatorTitle":[{"text":"WebView","kind":"identifier"}],"title":"Payment.WebView"},"doc://com.tpay.sdk/documentation/Tpay/RecursiveTransaction":{"url":"\/documentation\/tpay\/recursivetransaction","title":"RecursiveTransaction","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"RecursiveTransaction"}],"role":"symbol","navigatorTitle":[{"kind":"identifier","text":"RecursiveTransaction"}],"kind":"symbol","type":"topic","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/RecursiveTransaction","abstract":[{"text":"The ","type":"text"},{"type":"codeVoice","code":"RecursiveTransaction"},{"text":" struct represents a recursive transaction. It extends a specified transaction object with recursion parameters such as the frequency, quantity, and expiry date.","type":"text"}]},"doc://com.tpay.sdk/documentation/Tpay/PaymentDelegate":{"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/PaymentDelegate","type":"topic","abstract":[{"text":"The ","type":"text"},{"code":"PaymentDelegate","type":"codeVoice"},{"text":" protocol defines the methods that a delegate should implement to handle payment-related events.","type":"text"}],"title":"PaymentDelegate","role":"symbol","navigatorTitle":[{"text":"PaymentDelegate","kind":"identifier"}],"url":"\/documentation\/tpay\/paymentdelegate","kind":"symbol","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"PaymentDelegate","kind":"identifier"}]},"doc://com.tpay.sdk/documentation/Tpay/AutomaticPaymentMethods":{"role":"symbol","abstract":[{"type":"text","text":"The "},{"type":"codeVoice","code":"AutomaticPaymentMethods"},{"type":"text","text":" struct represents a collection of automatic payment methods associated with a concrete payer."}],"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"AutomaticPaymentMethods","kind":"identifier"}],"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/AutomaticPaymentMethods","navigatorTitle":[{"text":"AutomaticPaymentMethods","kind":"identifier"}],"kind":"symbol","type":"topic","title":"AutomaticPaymentMethods","url":"\/documentation\/tpay\/automaticpaymentmethods"},"doc://com.tpay.sdk/documentation/Tpay/CardTokenization":{"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/CardTokenization","type":"topic","abstract":[{"text":"Saving credit card details for future purchases.","type":"text"}],"role":"collectionGroup","title":"Card tokenization","kind":"article","url":"\/documentation\/tpay\/cardtokenization"},"doc://com.tpay.sdk/documentation/Tpay/AutomaticPayments":{"abstract":[{"text":"Providing automatic payment methods for a specific payer.","type":"text"}],"kind":"article","url":"\/documentation\/tpay\/automaticpayments","type":"topic","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/AutomaticPayments","title":"Automatic payments","role":"article"},"https://openapi.tpay.com":{"title":"OpenAPI documentation","identifier":"https:\/\/openapi.tpay.com","titleInlineContent":[{"text":"OpenAPI documentation","type":"text"}],"url":"https:\/\/openapi.tpay.com","type":"link"},"doc://com.tpay.sdk/documentation/Tpay":{"role":"collection","kind":"symbol","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay","url":"\/documentation\/tpay","type":"topic","abstract":[],"title":"Tpay"},"doc://com.tpay.sdk/documentation/Tpay/Payment/Sheet/present(from:)":{"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Sheet\/present(from:)","title":"present(from:)","role":"symbol","url":"\/documentation\/tpay\/payment\/sheet\/present(from:)","abstract":[{"text":"Presents the payment sheet from a specified view controller.","type":"text"}],"type":"topic","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"present"},{"kind":"text","text":"("},{"kind":"externalParam","text":"from"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"UIViewController","preciseIdentifier":"c:objc(cs)UIViewController"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"}],"kind":"symbol"}},"variantOverrides":[{"patch":[{"value":"occ","op":"replace","path":"\/identifier\/interfaceLanguage"},{"value":null,"op":"add","path":"\/topicSections"},{"value":[{"identifiers":["doc:\/\/com.tpay.sdk\/documentation\/Tpay\/CardTokenization","doc:\/\/com.tpay.sdk\/documentation\/Tpay\/AutomaticPayments"],"generated":true,"anchor":"Use-cases","title":"Use cases"}],"op":"replace","path":"\/seeAlsoSections"}],"traits":[{"interfaceLanguage":"occ"}]}]}