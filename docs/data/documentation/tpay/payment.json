{"seeAlsoSections":[{"title":"Use cases","identifiers":["doc:\/\/com.tpay.sdk\/documentation\/Tpay\/CardTokenization","doc:\/\/com.tpay.sdk\/documentation\/Tpay\/AutomaticPayments"],"generated":true}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"primaryContentSections":[{"kind":"content","content":[{"anchor":"Create-a-transaction","level":2,"type":"heading","text":"Create a transaction"},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can create a transaction using the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/SingleTransaction"},{"type":"text","text":" struct specifying the transactionâ€™s amount and description."}]},{"type":"codeListing","syntax":"swift","code":["let singleTransaction = SingleTransaction(amount: 50.0, description: \"Product Purchase\")"]},{"anchor":"Payer-context","level":3,"type":"heading","text":"Payer context"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The payer context provides information about the payer, including their personal details and automatic payment methods. You can pass it along with transaction details."}]},{"type":"codeListing","syntax":"swift","code":["let payer = Payer(name: \"John Doe\", email: \"john@example.com\")","let payerContext = PayerContext(payer: payer, automaticPaymentMethods: nil)","let singleTransaction = SingleTransaction(amount: 50.0, description: \"Product Purchase\", payerContext: payerContext)"]},{"style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"See "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/AutomaticPaymentMethods"},{"type":"text","text":" page describing how to provide automatic payment methods for a specific payer."}]}],"type":"aside","name":"Note"},{"anchor":"Recursive-transaction","level":3,"type":"heading","text":"Recursive transaction"},{"type":"paragraph","inlineContent":[{"type":"text","text":"For recurring transactions, you shall create an instance of "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/RecursiveTransaction"},{"type":"text","text":" specifying recursion parameters such as the frequency, quantity, and expiry date."}]},{"type":"codeListing","syntax":"swift","code":["let recursiveTransaction = RecursiveTransaction(wrapping: singleTransaction,","                                                frequency: .monthly,","                                                quantity: .count(5),","                                                expiryDate: futureDate)"]},{"anchor":"Payment-sheet","level":2,"type":"heading","text":"Payment sheet"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Sheet"},{"type":"text","text":" is designed to guide the user through the payment process. Payment sheet is presented in a modal style, providing a focused and intuitive payment interaction. The class interacts with the provided "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/PaymentDelegate"},{"type":"text","text":" to notify about payment events."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To create an instance of the "},{"type":"codeVoice","code":"Sheet"},{"type":"text","text":" class, initialize it with a "},{"type":"codeVoice","code":"Transaction"},{"type":"text","text":" object and an optional "},{"type":"codeVoice","code":"PaymentDelegate"},{"type":"text","text":":"}]},{"type":"codeListing","syntax":"swift","code":["let paymentSheet = Payment.Sheet(transaction: transaction, delegate: delegate)"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Use the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Sheet"},{"type":"text","text":" method to present the payment sheet from a view controller:"}]},{"type":"codeListing","syntax":"swift","code":["do {","    try paymentSheet.present(from: presentingViewController)","} catch {","    \/\/ Handle configuration errors or other exceptions","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To dismiss the payment sheet manually, call the "},{"type":"codeVoice","code":"dismiss()"},{"type":"text","text":" method:"}]},{"type":"codeListing","syntax":"swift","code":["paymentSheet.dismiss()"]},{"anchor":"SwiftUI-way","level":3,"type":"heading","text":"SwiftUI way"},{"type":"codeListing","syntax":"swift","code":["struct ContentView: View {","    @State private var isPaymentSheetPresented = false","","    var body: some View {","        Button(\"Pay\") {","            isPaymentSheetPresented.toggle()","        }","        .presentPaymentSheet(for: transaction, isPresented: $isPaymentSheetPresented) { transactionId in","            \/\/ Handle payment completed","        } onPaymentCancelled: { transactionId in","            \/\/ Handle payment cancelled","        } onErrorOccured: { error in","            \/\/ Handle payment error","        }","    }","}"]},{"anchor":"Headless","level":2,"type":"heading","text":"Headless"},{"type":"paragraph","inlineContent":[{"type":"text","text":"An alternative method for incorporating payments into an application is available. This approach empowers developers to autonomously gather all necessary payer information, facilitating the invocation of methods to programmatically initiate and advance through payment transactions, all without relying on a dedicated user interface (Payment Sheet)."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Initially, retrieve the list of available payment channels:"}]},{"type":"codeListing","syntax":"swift","code":["Headless.getAvailablePaymentChannels { result in","    switch result {","    case .success(let paymentChannels):","        \/\/ Handle available payment channels","    case .failure(let error):","        \/\/ Handle error","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Once you have the list of available payment channels, choose the desired channel and execute the relevant method with the appropriate arguments:"}]},{"type":"codeListing","syntax":"swift","code":["do {","    Headless.invokePayment(for: transaction, using: cardPaymentChannel, with: card) { result in","        switch result {","        case .success(let paymentResult):","            \/\/ Handle payment result","        case .failure(let error):","            \/\/ Handle error","        }","    }","} catch {","    \/\/ Handle invocation errors or other exceptions","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"After successful payment invocation, you can retrieve the current payment status using:"}]},{"type":"codeListing","syntax":"swift","code":["Headless.getPaymentStatus(for: paymentResult.ongoingTransaction) { statusResult in","    switch statusResult {","    case .success(let paymentStatus):","        \/\/ Handle payment status","    case .failure(let statusError):","        \/\/ Handle status retrieval error","    }","}"]}]}],"variants":[{"paths":["\/documentation\/tpay\/payment"],"traits":[{"interfaceLanguage":"swift"}]},{"paths":["\/documentation\/tpay\/payment"],"traits":[{"interfaceLanguage":"occ"}]}],"identifier":{"url":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Creating and processing payment transactions."}],"kind":"article","metadata":{"modules":[{"name":"Tpay"}],"role":"collectionGroup","title":"Payment"},"hierarchy":{"paths":[["doc:\/\/com.tpay.sdk\/documentation\/Tpay"]]},"topicSections":[{"title":"Classes","identifiers":["doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Sheet","doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Button"]},{"title":"Protocols","identifiers":["doc:\/\/com.tpay.sdk\/documentation\/Tpay\/PaymentDelegate"]}],"references":{"doc://com.tpay.sdk/documentation/Tpay/AutomaticPaymentMethods":{"role":"symbol","title":"AutomaticPaymentMethods","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"AutomaticPaymentMethods"}],"abstract":[{"type":"text","text":"The "},{"type":"codeVoice","code":"AutomaticPaymentMethods"},{"type":"text","text":" struct represents a collection of automatic payment methods associated with a concrete payer."}],"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/AutomaticPaymentMethods","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"AutomaticPaymentMethods"}],"url":"\/documentation\/tpay\/automaticpaymentmethods"},"doc://com.tpay.sdk/documentation/Tpay/PaymentDelegate":{"role":"symbol","title":"PaymentDelegate","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"PaymentDelegate"}],"abstract":[{"type":"text","text":"The "},{"type":"codeVoice","code":"PaymentDelegate"},{"type":"text","text":" protocol defines the methods that a delegate should implement to handle payment-related events."}],"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/PaymentDelegate","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"PaymentDelegate"}],"url":"\/documentation\/tpay\/paymentdelegate"},"doc://com.tpay.sdk/documentation/Tpay/SingleTransaction":{"role":"symbol","title":"SingleTransaction","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"SingleTransaction"}],"abstract":[{"type":"text","text":"The "},{"type":"codeVoice","code":"SingleTransaction"},{"type":"text","text":" struct represents a single transaction with associated properties such as the transaction amount, description, and payer context."}],"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/SingleTransaction","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"SingleTransaction"}],"url":"\/documentation\/tpay\/singletransaction"},"doc://com.tpay.sdk/documentation/Tpay/RecursiveTransaction":{"role":"symbol","title":"RecursiveTransaction","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"RecursiveTransaction"}],"abstract":[{"type":"text","text":"The "},{"type":"codeVoice","code":"RecursiveTransaction"},{"type":"text","text":" struct represents a recursive transaction. It extends a specified transaction object with recursion parameters such as the frequency, quantity, and expiry date."}],"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/RecursiveTransaction","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"RecursiveTransaction"}],"url":"\/documentation\/tpay\/recursivetransaction"},"doc://com.tpay.sdk/documentation/Tpay/Payment/Button":{"role":"symbol","title":"Payment.Button","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"Button"}],"abstract":[{"type":"text","text":"The specialized UIButton designed to serve as an effortless entry point for invoking the payment sheet within your app."}],"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Button","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Button"}],"url":"\/documentation\/tpay\/payment\/button"},"doc://com.tpay.sdk/documentation/Tpay/AutomaticPayments":{"role":"article","title":"Automatic payments","abstract":[{"type":"text","text":"Providing automatic payment methods for a specific payer."}],"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/AutomaticPayments","kind":"article","type":"topic","url":"\/documentation\/tpay\/automaticpayments"},"doc://com.tpay.sdk/documentation/Tpay/Payment/Sheet":{"role":"symbol","title":"Payment.Sheet","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"Sheet"}],"abstract":[{"type":"text","text":"The "},{"type":"codeVoice","code":"Payment.Sheet"},{"type":"text","text":" class provides a streamlined way to present payment transactions within your app."}],"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Sheet","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Sheet"}],"url":"\/documentation\/tpay\/payment\/sheet"},"doc://com.tpay.sdk/documentation/Tpay":{"role":"collection","title":"Tpay","abstract":[],"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay","kind":"symbol","type":"topic","url":"\/documentation\/tpay"},"doc://com.tpay.sdk/documentation/Tpay/CardTokenization":{"role":"collectionGroup","title":"Card tokenization","abstract":[{"type":"text","text":"Saving credit card details for future purchases."}],"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/CardTokenization","kind":"article","type":"topic","url":"\/documentation\/tpay\/cardtokenization"}},"variantOverrides":[{"patch":[{"op":"replace","path":"\/identifier\/interfaceLanguage","value":"occ"},{"op":"replace","path":"\/topicSections","value":null},{"op":"replace","path":"\/seeAlsoSections","value":[{"title":"Use cases","identifiers":["doc:\/\/com.tpay.sdk\/documentation\/Tpay\/CardTokenization","doc:\/\/com.tpay.sdk\/documentation\/Tpay\/AutomaticPayments"],"generated":true}]}],"traits":[{"interfaceLanguage":"occ"}]}]}