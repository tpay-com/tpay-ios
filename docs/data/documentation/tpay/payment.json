{"kind":"article","abstract":[{"type":"text","text":"Creating and processing payment transactions."}],"identifier":{"url":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment","interfaceLanguage":"swift"},"sections":[],"hierarchy":{"paths":[["doc:\/\/com.tpay.sdk\/documentation\/Tpay"]]},"primaryContentSections":[{"kind":"content","content":[{"level":2,"type":"heading","anchor":"Create-a-transaction","text":"Create a transaction"},{"type":"paragraph","inlineContent":[{"text":"You can create a transaction using the ","type":"text"},{"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/SingleTransaction","isActive":true,"type":"reference"},{"text":" struct specifying the transactionâ€™s amount and description.","type":"text"}]},{"code":["let singleTransaction = SingleTransaction(amount: 50.0, description: \"Product Purchase\")"],"syntax":"swift","type":"codeListing"},{"level":3,"type":"heading","anchor":"Payer-context","text":"Payer context"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The payer context provides information about the payer, including their personal details and automatic payment methods. You can pass it along with transaction details."}]},{"code":["let payer = Payer(name: \"John Doe\", email: \"john@example.com\")","let payerContext = PayerContext(payer: payer, automaticPaymentMethods: nil)","let singleTransaction = SingleTransaction(amount: 50.0, description: \"Product Purchase\", payerContext: payerContext)"],"syntax":"swift","type":"codeListing"},{"name":"Note","content":[{"type":"paragraph","inlineContent":[{"text":"See ","type":"text"},{"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/AutomaticPaymentMethods","type":"reference","isActive":true},{"text":" page describing how to provide automatic payment methods for a specific payer.","type":"text"}]}],"type":"aside","style":"note"},{"level":3,"type":"heading","anchor":"Recursive-transaction","text":"Recursive transaction"},{"type":"paragraph","inlineContent":[{"text":"For recurring transactions, you shall create an instance of ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/RecursiveTransaction"},{"text":" specifying recursion parameters such as the frequency, quantity, and expiry date.","type":"text"}]},{"code":["let recursiveTransaction = RecursiveTransaction(wrapping: singleTransaction,","                                                frequency: .monthly,","                                                quantity: .specific(5),","                                                expiryDate: futureDate)"],"syntax":"swift","type":"codeListing"},{"level":2,"type":"heading","anchor":"Payment-sheet","text":"Payment sheet"},{"type":"paragraph","inlineContent":[{"text":"The ","type":"text"},{"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Sheet","isActive":true,"type":"reference"},{"text":" is designed to guide the user through the payment process. Payment sheet is presented in a modal style, providing a focused and intuitive payment interaction. The class interacts with the provided ","type":"text"},{"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/PaymentDelegate","isActive":true,"type":"reference"},{"text":" to notify about payment events.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To create an instance of the "},{"code":"Sheet","type":"codeVoice"},{"type":"text","text":" class, initialize it with a "},{"code":"Transaction","type":"codeVoice"},{"type":"text","text":" object and an optional "},{"code":"PaymentDelegate","type":"codeVoice"},{"type":"text","text":":"}]},{"type":"codeListing","syntax":"swift","code":["let paymentSheet = Payment.Sheet(transaction: transaction, delegate: delegate)"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Use the "},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Sheet\/present(from:)"},{"type":"text","text":" method to present the payment sheet from a view controller:"}]},{"type":"codeListing","syntax":"swift","code":["do {","    try paymentSheet.present(from: presentingViewController)","} catch {","    \/\/ Handle configuration errors or other exceptions","}"]},{"type":"paragraph","inlineContent":[{"text":"To dismiss the payment sheet manually, call the ","type":"text"},{"code":"dismiss()","type":"codeVoice"},{"text":" method:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["paymentSheet.dismiss()"]},{"type":"heading","text":"SwiftUI way","anchor":"SwiftUI-way","level":3},{"type":"codeListing","syntax":"swift","code":["struct ContentView: View {","    @State private var isPaymentSheetPresented = false","","    var body: some View {","        Button(\"Pay\") {","            isPaymentSheetPresented.toggle()","        }","        .presentPaymentSheet(for: transaction, isPresented: $isPaymentSheetPresented) { transactionId in","            \/\/ Handle payment completed","        } onPaymentCancelled: { transactionId in","            \/\/ Handle payment cancelled","        } onErrorOccured: { error in","            \/\/ Handle payment error","        }","    }","}"]},{"type":"heading","text":"Payment WebView","anchor":"Payment-WebView","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can easily handle externally generated transactions with a WebView component."},{"type":"text","text":" "},{"type":"text","text":"In order to generate a tranaction, please follow "},{"type":"codeVoice","code":"Transactions"},{"type":"text","text":" section under "},{"type":"reference","identifier":"https:\/\/openapi.tpay.com","isActive":true},{"type":"text","text":"."}]},{"type":"codeListing","syntax":"swift","code":["let transaction = ExternallyGeneratedTransaction(transactionPaymentUrl: transactionPaymentUrl,  \/\/ retrieved from POST \/transactions","                                                 onSuccessRedirectUrl: onSuccessUrl,            \/\/ must match the one sent on transaction create","                                                 onErrorRedirectUrl: onErrorUrl)                \/\/ must match the one sent on transaction create","","let paymentWebView = Payment.WebView(transaction: transaction, delegate: delegate)","do {","    try paymentWebView?.present(from: self)","} catch {","    \/\/ Handle configuration errors or other exceptions","}"]},{"type":"heading","text":"Classes","anchor":"Classes","level":3},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"isActive":true,"type":"reference","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Sheet"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"isActive":true,"type":"reference","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Button"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"isActive":true,"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/WebView","type":"reference"}]}]}]},{"type":"heading","text":"Protocols","anchor":"Protocols","level":3},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/PaymentDelegate","type":"reference","isActive":true}]}]}]}]}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/tpay\/payment"]},{"traits":[{"interfaceLanguage":"occ"}],"paths":["\/documentation\/tpay\/payment"]}],"metadata":{"role":"article","roleHeading":"Article","modules":[{"name":"Tpay"}],"title":"Payment"},"schemaVersion":{"major":0,"minor":3,"patch":0},"seeAlsoSections":[{"identifiers":["doc:\/\/com.tpay.sdk\/documentation\/Tpay\/CardTokenization","doc:\/\/com.tpay.sdk\/documentation\/Tpay\/AutomaticPayments"],"anchor":"Use-cases","generated":true,"title":"Use cases"}],"references":{"doc://com.tpay.sdk/documentation/Tpay/RecursiveTransaction":{"title":"RecursiveTransaction","role":"symbol","url":"\/documentation\/tpay\/recursivetransaction","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"RecursiveTransaction","kind":"identifier"}],"navigatorTitle":[{"text":"RecursiveTransaction","kind":"identifier"}],"abstract":[{"type":"text","text":"The "},{"type":"codeVoice","code":"RecursiveTransaction"},{"type":"text","text":" struct represents a recursive transaction. It extends a specified transaction object with recursion parameters such as the frequency, quantity, and expiry date."}],"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/RecursiveTransaction","type":"topic","kind":"symbol"},"doc://com.tpay.sdk/documentation/Tpay":{"type":"topic","abstract":[],"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay","url":"\/documentation\/tpay","kind":"symbol","title":"Tpay","role":"collection"},"doc://com.tpay.sdk/documentation/Tpay/Payment/Button":{"fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"Button"}],"kind":"symbol","abstract":[{"type":"text","text":"The specialized UIButton designed to serve as an effortless entry point for invoking the payment sheet within your app."}],"navigatorTitle":[{"kind":"identifier","text":"Button"}],"title":"Payment.Button","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Button","type":"topic","role":"symbol","url":"\/documentation\/tpay\/payment\/button"},"doc://com.tpay.sdk/documentation/Tpay/CardTokenization":{"url":"\/documentation\/tpay\/cardtokenization","type":"topic","title":"Card tokenization","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/CardTokenization","kind":"article","abstract":[{"type":"text","text":"Saving credit card details for future purchases."}],"role":"collectionGroup"},"doc://com.tpay.sdk/documentation/Tpay/Payment/Sheet/present(from:)":{"fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"present"},{"kind":"text","text":"("},{"kind":"externalParam","text":"from"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"UIViewController","preciseIdentifier":"c:objc(cs)UIViewController"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"}],"url":"\/documentation\/tpay\/payment\/sheet\/present(from:)","type":"topic","title":"present(from:)","kind":"symbol","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Sheet\/present(from:)","abstract":[{"text":"Presents the payment sheet from a specified view controller.","type":"text"}],"role":"symbol"},"doc://com.tpay.sdk/documentation/Tpay/Payment/Sheet":{"fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Sheet","kind":"identifier"}],"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/Sheet","abstract":[{"text":"The ","type":"text"},{"code":"Payment.Sheet","type":"codeVoice"},{"text":" class provides a streamlined way to present payment transactions within your app.","type":"text"}],"navigatorTitle":[{"text":"Sheet","kind":"identifier"}],"kind":"symbol","type":"topic","title":"Payment.Sheet","role":"symbol","url":"\/documentation\/tpay\/payment\/sheet"},"doc://com.tpay.sdk/documentation/Tpay/Payment/WebView":{"role":"symbol","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"WebView","kind":"identifier"}],"navigatorTitle":[{"text":"WebView","kind":"identifier"}],"type":"topic","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/Payment\/WebView","url":"\/documentation\/tpay\/payment\/webview","kind":"symbol","abstract":[{"type":"text","text":"The "},{"type":"codeVoice","code":"WebView"},{"type":"text","text":" class provides functionality for presenting a web view for externally-generated transaction processing within the payment module."}],"title":"Payment.WebView"},"doc://com.tpay.sdk/documentation/Tpay/SingleTransaction":{"identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/SingleTransaction","navigatorTitle":[{"text":"SingleTransaction","kind":"identifier"}],"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"SingleTransaction","kind":"identifier"}],"type":"topic","kind":"symbol","title":"SingleTransaction","role":"symbol","url":"\/documentation\/tpay\/singletransaction","abstract":[{"type":"text","text":"The "},{"type":"codeVoice","code":"SingleTransaction"},{"type":"text","text":" struct represents a single transaction with associated properties such as the transaction amount, description, and payer context."}]},"doc://com.tpay.sdk/documentation/Tpay/PaymentDelegate":{"type":"topic","role":"symbol","navigatorTitle":[{"text":"PaymentDelegate","kind":"identifier"}],"abstract":[{"text":"The ","type":"text"},{"type":"codeVoice","code":"PaymentDelegate"},{"text":" protocol defines the methods that a delegate should implement to handle payment-related events.","type":"text"}],"fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"PaymentDelegate","kind":"identifier"}],"kind":"symbol","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/PaymentDelegate","url":"\/documentation\/tpay\/paymentdelegate","title":"PaymentDelegate"},"doc://com.tpay.sdk/documentation/Tpay/AutomaticPaymentMethods":{"url":"\/documentation\/tpay\/automaticpaymentmethods","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/AutomaticPaymentMethods","role":"symbol","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"AutomaticPaymentMethods"}],"type":"topic","abstract":[{"type":"text","text":"The "},{"type":"codeVoice","code":"AutomaticPaymentMethods"},{"type":"text","text":" struct represents a collection of automatic payment methods associated with a concrete payer."}],"navigatorTitle":[{"kind":"identifier","text":"AutomaticPaymentMethods"}],"kind":"symbol","title":"AutomaticPaymentMethods"},"doc://com.tpay.sdk/documentation/Tpay/AutomaticPayments":{"role":"article","type":"topic","title":"Automatic payments","abstract":[{"text":"Providing automatic payment methods for a specific payer.","type":"text"}],"url":"\/documentation\/tpay\/automaticpayments","identifier":"doc:\/\/com.tpay.sdk\/documentation\/Tpay\/AutomaticPayments","kind":"article"},"https://openapi.tpay.com":{"titleInlineContent":[{"text":"OpenAPI documentation","type":"text"}],"url":"https:\/\/openapi.tpay.com","title":"OpenAPI documentation","type":"link","identifier":"https:\/\/openapi.tpay.com"}},"variantOverrides":[{"patch":[{"value":"occ","op":"replace","path":"\/identifier\/interfaceLanguage"},{"value":null,"op":"add","path":"\/topicSections"},{"value":[{"title":"Use cases","identifiers":["doc:\/\/com.tpay.sdk\/documentation\/Tpay\/CardTokenization","doc:\/\/com.tpay.sdk\/documentation\/Tpay\/AutomaticPayments"],"anchor":"Use-cases","generated":true}],"op":"replace","path":"\/seeAlsoSections"}],"traits":[{"interfaceLanguage":"occ"}]}]}